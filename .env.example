# ============================================
# Hyperclaw Environment Variables
# ============================================

# Privy (auth)
NEXT_PUBLIC_PRIVY_APP_ID=your_privy_app_id_here
NEXT_PUBLIC_PRIVY_CLIENT_ID= # optional

# Web Push (notifications)
WEB_PUSH_EMAIL=user@example.com
WEB_PUSH_PRIVATE_KEY=your_vapid_private_key
NEXT_PUBLIC_WEB_PUSH_PUBLIC_KEY=your_vapid_public_key

# Hyperliquid (operator wallet â€” funds agent wallets via usdSend)
HYPERLIQUID_PRIVATE_KEY=your_operator_private_key_hex
# Optional override for Lit PKP authorization.
# If set, this key signs Lit auth and must own the PKP NFTs used by agents.
# LIT_OPERATOR_PRIVATE_KEY=your_lit_pkp_owner_private_key_hex
NEXT_PUBLIC_HYPERLIQUID_TESTNET=false  # set to "true" for testnet trading

# Hyperliquid Builder Codes (earn fees on trades)
NEXT_PUBLIC_BUILDER_ADDRESS=your_builder_wallet_address  # Address that receives builder fees
NEXT_PUBLIC_BUILDER_FEE=10  # Builder fee in tenths of basis points (10 = 1bp = 0.1%)

# Deposit relay fee (basis points, 100 = 1%, mainnet only)
RELAY_FEE_BPS=100
# Mainnet MON/USD relay safeguards
# Reject suspicious MON prices (e.g. stale $1 feed) outside this range
MAINNET_MON_MIN_PRICE_USD=1.05
MAINNET_MON_MAX_PRICE_USD=100000
# If oracle vs external feed drift exceeds this percent, relay pauses funding
MAINNET_MON_ORACLE_FEED_MAX_DRIFT_PCT=35
# Optional manual override (number). When set, this exact MON/USD is used.
# MAINNET_MON_PRICE_OVERRIDE_USD=
# Frontend minimum MON deposit guard
NEXT_PUBLIC_MIN_MON_DEPOSIT=450

# Relay pricing allowlist for ERC20 deposits (comma-separated, lowercase)
# Tokens listed here are treated as $1 in relay conversion.
# Example: RELAY_STABLE_TOKENS=0xabc...,0xdef...
RELAY_STABLE_TOKENS=

# Mainnet withdrawal bridge relay (Hyperunit + deBridge)
# Deposit path is always operator-funded via direct HL usdSend.
MAINNET_BRIDGE_ENABLED=false
# Optional: try deBridge before Hyperunit on withdrawal
MAINNET_BRIDGE_PREFER_DEBRIDGE=false

# Hyperunit API settings
HYPERUNIT_API_URL=https://api.hyperunit.xyz
# Optional auth for restricted Hyperunit environments
# HYPERUNIT_API_KEY=
# HYPERUNIT_BEARER_TOKEN=
HYPERUNIT_MONAD_CHAIN=monad
HYPERUNIT_HYPERLIQUID_CHAIN=hyperliquid
# Deprecated in relay flow (deposit bridging disabled)
HYPERUNIT_DEPOSIT_ASSET=mon
HYPERUNIT_WITHDRAW_ASSET=usdc

# Relay execution wallet on Monad for bridge submissions
# Falls back to MONAD_PRIVATE_KEY if unset.
# RELAY_MONAD_PRIVATE_KEY=0x...

# deBridge DLN fallback / quote settings (optional but recommended)
DEBRIDGE_API_URL=https://dln.debridge.finance
# DEBRIDGE_API_KEY=your_debridge_api_key
# Chain/token IDs are protocol-level IDs from deBridge chain registry.
# DEBRIDGE_MONAD_CHAIN_ID=
# DEBRIDGE_HYPERLIQUID_CHAIN_ID=
# DEBRIDGE_MONAD_TOKEN_IN=
# DEBRIDGE_HYPERLIQUID_TOKEN_OUT=
# DEBRIDGE_SLIPPAGE=1
# DEBRIDGE_PREPEND_OPERATING_EXPENSE=true
# DEBRIDGE_AFFILIATE_FEE_PERCENT=0

# Production safety: keep runtime network switching disabled by default
ALLOW_RUNTIME_NETWORK_SWITCH=false

# AI (agent brain)
OPENAI_API_KEY=your_openai_api_key
ANTHROPIC_API_KEY=sk-ant-api03-xxx
# Supermemory: per-agent memory (past decisions, outcomes, preferences). Get key: https://console.supermemory.ai
# Run scripts/configure-supermemory.mjs once after setting key.
# SUPERMEMORY_API_KEY=sm_xxx
# Optional: use a local/self-hosted OpenAI-compatible API (Ollama, LM Studio, etc.)
# Expose your local server (e.g. Ollama on :11434) via ngrok: ngrok http 11434
# Then set OPENAI_API_BASE_URL=https://YOUR-NGROK-URL.ngrok-free.app/v1
# Put your local model first in AI_MODEL_CHAIN: openai:llama3.2,gemini:...
# OPENAI_REQUEST_TIMEOUT_MS=120000  # optional: increase for slow local models (default 60s)
# OPENAI_API_BASE_URL=
GEMINI_API_KEY=your_google_ai_studio_api_key
NVIDIA_API_KEY=your_nvidia_api_key
# Ordered fallback chain (provider:model). Tries each model in order.
AI_MODEL_CHAIN=gemini:gemini-2.5-flash,nvidia:moonshotai/kimi-k2.5,gemini:gemini-3-flash-preview,nvidia:nvidia/llama-3.1-nemotron-ultra-253b-v1,gemini:gemini-2.5-flash-lite,openai:gpt-4o
# Optional provider-specific model lists (used when AI_MODEL_CHAIN is not set)
OPENAI_MODELS=gpt-4o
GEMINI_MODELS=gemini-2.5-flash,gemini-3-flash-preview,gemini-2.5-flash-lite,gemma-3-27b-it,gemma-3-12b-it,gemma-3-4b-it,gemma-3-2b-it,gemma-3-1b-it
NVIDIA_MODELS=moonshotai/kimi-k2.5,nvidia/llama-3.1-nemotron-ultra-253b-v1
# Start falling back before hard limits (0.5 - 0.99)
AI_NEAR_LIMIT_THRESHOLD=0.85
# Agent cadence is enforced between 30 and 60 minutes.
AGENT_TICK_MIN_INTERVAL_MS=1800000
AGENT_TICK_MAX_INTERVAL_MS=3600000
# Legacy override: fixed interval in ms (still clamped to min/max range above)
# AGENT_TICK_INTERVAL=2700000
# Autonomous strategy evaluation lookback (number of recent directional trades)
AGENT_AUTONOMOUS_BACKTEST_LOOKBACK=60
# Testnet execution mode: bypass skip gates so active testnet agents keep trading
TESTNET_FORCE_CONTINUOUS_EXECUTION=true
# Mainnet execution mode: bypass skip gates so active mainnet agents keep trading
MAINNET_FORCE_CONTINUOUS_EXECUTION=true
# Confidence gate is hard-set at 10% for execution (trades only skipped below 0.10 confidence).
# Never-skip mode now only relaxes min notional to $0.01.
AGENT_NEVER_SKIP_TRADES=true

# Trade liveness: force at least one executed trade within this window (default 15m).
# Implementation forces a non-"hold" decision when the next tick would miss the deadline.
AGENT_MUST_TRADE_INTERVAL_MS=900000
# Minimum notional target (USD) when forcing a liveness trade. Default mirrors AGENT_MIN_ORDER_NOTIONAL_USD.
AGENT_MUST_TRADE_MIN_ORDER_NOTIONAL_USD=10
# Cooldown between forced liveness overrides per agent (ms).
AGENT_MUST_TRADE_FORCE_COOLDOWN_MS=60000

# Deposit relay: if vault oracle and external feed disagree beyond MAINNET_MON_ORACLE_FEED_MAX_DRIFT_PCT,
# prefer the external feed (default true). Set false to prefer the vault oracle.
MAINNET_MON_PRICE_PREFER_FEED_ON_MISMATCH=true
TESTNET_MIN_ORDER_NOTIONAL_USD=1
# Optional accounting-only estimate for per-decision model cost (cap enforcement disabled).
AGENT_AI_COST_PER_DECISION_USD=0.02

# Telegram Bot (notifications + vault chat rooms)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token  # from @BotFather
# Optional explicit public webhook URL (full path)
# TELEGRAM_WEBHOOK_URL=https://your-app.up.railway.app/api/telegram/webhook
# Optional secret validated by Telegram and sent as X-Telegram-Bot-Api-Secret-Token
# TELEGRAM_WEBHOOK_SECRET=your_random_secret
# Optional app base URL (used to build webhook URL when TELEGRAM_WEBHOOK_URL is unset)
# PUBLIC_BASE_URL=https://your-app.up.railway.app

# Account encryption (for stored agent private keys - traditional mode only)
ACCOUNT_ENCRYPTION_KEY=your_random_encryption_secret

# ============================================
# Lit Protocol v8 (Naga) - Secure PKP Key Management
# ============================================

# Enable Lit Protocol PKP for agent wallets (recommended for production)
# When true, new agents get PKP wallets instead of traditional encrypted keys
USE_LIT_PKP=false

# Lit Protocol network (v8 Naga):
# - "naga-dev" (free dev network, no persistence guarantees)
# - "naga-test" (paid testnet with Ledger)
# - "naga" (mainnet)
LIT_NETWORK=naga-dev

# Pinata API credentials for deploying Lit Actions to IPFS (optional)
# Get keys at https://pinata.cloud
# PINATA_API_KEY=your_pinata_api_key
# PINATA_API_SECRET=your_pinata_api_secret

# Chronicle Yellowstone (Lit's chain) - for reference
# Chain ID: 175188
# RPC URL: https://yellowstone-rpc.litprotocol.com/
# Currency: tstLPX

# Monad Vault Contract
NEXT_PUBLIC_VAULT_ADDRESS=your_deployed_vault_contract_address
# Optional network-specific vault overrides (recommended when switching networks at runtime)
# NEXT_PUBLIC_MONAD_MAINNET_VAULT_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_TESTNET_VAULT_ADDRESS=0x...
# NEXT_PUBLIC_VAULT_ADDRESS_MAINNET=0x...
# NEXT_PUBLIC_VAULT_ADDRESS_TESTNET=0x...
MONAD_PRIVATE_KEY=your_monad_deployer_private_key
NEXT_PUBLIC_MONAD_TESTNET=true  # set to "false" for mainnet
# RPC URLs (optional overrides; defaults used if unset)
MONAD_MAINNET_RPC_URL=https://rpc.monad.xyz
NEXT_PUBLIC_MONAD_MAINNET_RPC_URL=https://rpc.monad.xyz
MONAD_TESTNET_RPC_URL=https://testnet-rpc.monad.xyz
NEXT_PUBLIC_MONAD_TESTNET_RPC_URL=https://testnet-rpc.monad.xyz
# Monad mainnet chain ID: 143 (0x8f)
MONAD_MAINNET_CHAIN_ID=143
HYPERLIQUID_MAINNET_RPC_URL=https://hyperliquid.drpc.org
# Hyperliquid mainnet chain ID: 999 (0x3e7)
HYPERLIQUID_MAINNET_CHAIN_ID=999

# $HCLAW Token
NEXT_PUBLIC_HCLAW_TOKEN_ADDRESS=0x640aE5523bAb907552829686eD031E06cE667777
NEXT_PUBLIC_HCLAW_LOCK_ADDRESS=your_hclaw_lock_contract_address
NEXT_PUBLIC_HCLAW_POLICY_ADDRESS=your_hclaw_policy_contract_address
NEXT_PUBLIC_HCLAW_REWARDS_ADDRESS=your_hclaw_rewards_contract_address
NEXT_PUBLIC_AGENTIC_LP_VAULT_ADDRESS=your_agentic_lp_vault_contract_address

# Optional network-specific overrides (recommended if both networks are used)
# NEXT_PUBLIC_HCLAW_TOKEN_ADDRESS_MAINNET=0x...
# NEXT_PUBLIC_HCLAW_TOKEN_ADDRESS_TESTNET=0x...
# NEXT_PUBLIC_HCLAW_LOCK_ADDRESS_MAINNET=0x...
# NEXT_PUBLIC_HCLAW_LOCK_ADDRESS_TESTNET=0x...
# NEXT_PUBLIC_HCLAW_POLICY_ADDRESS_MAINNET=0x...
# NEXT_PUBLIC_HCLAW_POLICY_ADDRESS_TESTNET=0x...
# NEXT_PUBLIC_HCLAW_REWARDS_ADDRESS_MAINNET=0x...
# NEXT_PUBLIC_HCLAW_REWARDS_ADDRESS_TESTNET=0x...
# NEXT_PUBLIC_AGENTIC_LP_VAULT_ADDRESS_MAINNET=0x...
# NEXT_PUBLIC_AGENTIC_LP_VAULT_ADDRESS_TESTNET=0x...
# Alternate per-network naming also supported:
# NEXT_PUBLIC_MONAD_MAINNET_HCLAW_TOKEN_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_TESTNET_HCLAW_TOKEN_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_MAINNET_HCLAW_LOCK_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_TESTNET_HCLAW_LOCK_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_MAINNET_HCLAW_POLICY_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_TESTNET_HCLAW_POLICY_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_MAINNET_HCLAW_REWARDS_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_TESTNET_HCLAW_REWARDS_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_MAINNET_AGENTIC_LP_VAULT_ADDRESS=0x...
# NEXT_PUBLIC_MONAD_TESTNET_AGENTIC_LP_VAULT_ADDRESS=0x...

# HCLAW weekly points and treasury routing
HCLAW_EPOCH_DURATION_DAYS=7
HCLAW_BUYBACK_SPLIT_BPS=4000
# Buyback recipient: use HclawBuybackLock address to auto-buy HCLAW and lock it.
# Deploy with: npm run deploy:hclaw-buyback-lock
HCLAW_BUYBACK_RECIPIENT=0x...
HCLAW_INCENTIVE_SPLIT_BPS=4000
HCLAW_RESERVE_SPLIT_BPS=2000
HCLAW_POINTS_CLOSE_KEY=your_hclaw_epoch_close_key

# Phala CVM (confidential agent/orchestrator)
PHALA_API_KEY=your_phala_api_key_from_cloud_phala_network
PHALA_CVM_ID=your_cvm_vm_uuid
PHALA_APP_ID=your_app_id

# ============================================
# Unibase AIP Platform (A2A Agent Protocol)
# ============================================

# AIP Platform endpoint (mainnet or testnet)
AIP_ENDPOINT=http://api.aip.unibase.com

# Gateway endpoint (routes agent invocations)
GATEWAY_URL=http://gateway.aip.unibase.com

# Your agent's publicly accessible URL (required for DIRECT mode)
# For POLLING mode (private agents), leave this commented out
# AGENT_PUBLIC_URL=https://your-domain.com/api/unibase

# Membase account (wallet address for X402 payments and memory)
# Use test account for development: 0x5ea13664c5ce67753f208540d25b913788aa3daa
MEMBASE_ACCOUNT=your_wallet_address_for_aip_payments

# Deployment mode: "DIRECT" (public endpoint) or "POLLING" (private/firewall)
AIP_DEPLOYMENT_MODE=POLLING

# Enforce X402 validation on /api/unibase/invoke/* (set "false" only for local testing)
X402_REQUIRED=true

# Shared secret expected from Unibase Gateway headers (required when X402_REQUIRED=true)
X402_GATEWAY_KEY=your_unibase_gateway_shared_secret

# Optional explicit Monad chain id for X402 validation.
# Defaults to active runtime network (143 mainnet, 10143 testnet).
# X402_MONAD_CHAIN_ID=143

# Monad on-chain metadata attestation for agents (writes one tx per agent metadata state).
MONAD_AGENT_ATTESTATION_ENABLED=true
# If true, agent creation/activation fails unless attestation tx succeeds.
MONAD_AGENT_ATTESTATION_REQUIRED=false
# Optional dedicated key for attestation tx signer. Falls back to RELAY_MONAD_PRIVATE_KEY or MONAD_PRIVATE_KEY.
# AIP_ATTESTATION_PRIVATE_KEY=0x...
# Optional target for attestation tx (default: signer address / self-tx).
# AIP_ATTESTATION_SINK_ADDRESS=0x...
# Optional base URI for off-chain metadata references. Final URI = {base}/{agentId}
# AIP_AGENT_METADATA_BASE_URI=https://cdn.hyperclaw.com/agents
# Optional receipt wait timeout (ms)
AIP_ATTESTATION_RECEIPT_TIMEOUT_MS=180000

# If true, lifecycle activation fails when AIP registration fails.
AIP_REGISTRATION_REQUIRED=false

# ============================================
# Production Deployment (Vercel + EC2)
# ============================================

# Shared store (required for Vercel - serverless has no persistent filesystem)
# AWS_S3_BUCKET=your-bucket-name
# (Can also be an S3 access point alias, e.g. xxx-s3alias)
# AWS_REGION=eu-north-1
# AWS_ACCESS_KEY_ID=...
# AWS_SECRET_ACCESS_KEY=...

# Supabase Postgres store (recommended for concurrent + long-term history)
# Hybrid mode: keep core state in Supabase, high-volume trade logs in S3.
# Set both SUPABASE_* and AWS_* to enable hybrid.
# SUPABASE_URL=https://your-project-ref.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
# Optional: trade archive prefix in bucket/access-point
# TRADE_ARCHIVE_PREFIX=hyperclaw/trades

# IronClaw assistant (optional - run ironclaw as sidecar, then set URL)
# For AWS deployment: postgres + ironclaw + caddy from ~/ironclaw-aws
# Security group: allow 80/tcp, 443/tcp. Webhook accepts requests with IRONCLAW_WEBHOOK_SECRET.
# Production: IRONCLAW_WEBHOOK_URL should be a public HTTPS endpoint.
# Dev-only sidecar: http://127.0.0.1:8080/webhook
# IRONCLAW_WEBHOOK_URL=https://your-ironclaw-domain/webhook
# Optional fallback candidate used when primary URL is stale/unreachable:
# IRONCLAW_WEBHOOK_FALLBACK_URL=https://your-ironclaw-domain/webhook
# IRONCLAW_WEBHOOK_SECRET=your-webhook-secret  # must match HTTP_WEBHOOK_SECRET in IronClaw

# Orchestrator auth (EC2 agent-orchestrator calls tick endpoints)
# Generate: openssl rand -hex 32
# ORCHESTRATOR_SECRET=your-shared-secret-for-ec2-orchestrator

# API auth (protects trade, fund, accounts, and MCP endpoints)
# Generate: openssl rand -hex 32
# HYPERCLAW_API_KEY=your-api-key-for-sensitive-routes
# MCP_API_KEY=optional-dedicated-key-for-ironclaw-mcp-if-different

# ============================================
# IronClaw Sidecar Production Defaults
# ============================================

# Keep runtime network switching disabled in production
# ALLOW_RUNTIME_NETWORK_SWITCH=false

# IronClaw secrets encryption key (required for MCP OAuth/static-header auth storage)
# Generate: openssl rand -hex 32
# SECRETS_MASTER_KEY=your-64-hex-master-key

# Webhook shared secret pair (set both for IronClaw sidecar usage)
# HTTP_WEBHOOK_SECRET=your-ironclaw-http-webhook-secret
# IRONCLAW_WEBHOOK_SECRET=same-value-as-http-webhook-secret
